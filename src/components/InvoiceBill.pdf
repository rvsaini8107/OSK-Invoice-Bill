import React, { useState } from "react";
import jsPDF from "jspdf";
import "jspdf-autotable";
const InvoiceBill = () => {
  const [formData, setFormData] = useState({
    // supplierName: 'M/S OM SHREE KARNI MARBLES GRANITES',
    plotNumber: "PLOT NO 2,3,36 and 37",
    location: "MOINABAD MANDAL 500075",
    gstin: "36AAHFO0962G1Z9",
    invoiceNo: "16",
    invoiceDate: "16-July-24",
    lorryNo: "TS32T5829",
    paymentTerms: "7 Days",
    supplierRef: "16",
    otherRef: "Verbally",
    buyerName: "M/S Dharavath Manoj Jadav",
    buyerAddress:
      "Shrinidhi Heights, Road No. 5G, Panchavati Colony, Manikonda, K.V.Rangareddy, TELANGANA-500089",
    buyerOrderNo: "16",
    buyerOrderDate: "16-July-24",
    deliveryTerms: "Verbal",
    description: "Granite Slabs",
    hsn: "6802",
    gstRate: "18%",
    quantity: "600",
    rate: "50",
    totalAmount: "35400",
    cgst: "2700",
    sgst: "2700",
    amountChargeable: "Thirty Thousand Only",
    taxAmount: "Five Thousand Four Hundred Only",
    companyPan: "AAHFO0962G",
  });

  const handleInputChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleDownload = () => {
    const doc = new jsPDF();

    // Add title
    doc.setFontSize(18);
    doc.text("Invoice", 105, 10, null, null, "center");

    // Add Supplier Information
    doc.setFontSize(12);
    //  doc.text(`Supplier: ${formData.supplierName}`, 10, 20);
    doc.text(`Plot Number: ${formData.plotNumber}`, 10, 30);
    doc.text(`Location: ${formData.location}`, 10, 40);
    doc.text(`GSTIN: ${formData.gstin}`, 10, 50);
    doc.text(`Invoice No: ${formData.invoiceNo}`, 10, 60);
    doc.text(`Dated: ${formData.invoiceDate}`, 10, 70);

    // Add Buyer Information
    doc.text(`Buyer: ${formData.buyerName}`, 10, 80);
    doc.text(`Buyer Address: ${formData.buyerAddress}`, 10, 90);
    doc.text(`Buyer's Order No: ${formData.buyerOrderNo}`, 10, 100);
    doc.text(`Dated: ${formData.buyerOrderDate}`, 10, 110);

    // Add Item Details using autoTable plugin
    doc.autoTable({
      startY: 120,
      head: [
        [
          "Description of Goods",
          "HSN/SAC",
          "GST Rate",
          "Quantity",
          "Rate",
          "Amount",
        ],
      ],
      body: [
        [
          formData.description,
          formData.hsn,
          formData.gstRate,
          formData.quantity,
          formData.rate,
          formData.totalAmount,
        ],
      ],
      theme: "striped",
    });

    // Add Taxes
    doc.text(`CGST: ${formData.cgst}`, 10, doc.autoTable.previous.finalY + 10);
    doc.text(`SGST: ${formData.sgst}`, 10, doc.autoTable.previous.finalY + 20);
    doc.text(
      `Total Amount: ${formData.totalAmount}`,
      10,
      doc.autoTable.previous.finalY + 30
    );
    doc.text(
      `Amount Chargeable: ${formData.amountChargeable}`,
      10,
      doc.autoTable.previous.finalY + 40
    );
    doc.text(
      `Tax Amount: ${formData.taxAmount}`,
      10,
      doc.autoTable.previous.finalY + 50
    );

    // Add Footer
    doc.text(
      `Company's PAN: ${formData.companyPan}`,
      10,
      doc.autoTable.previous.finalY + 60
    );
    doc.text("Declaration", 10, doc.autoTable.previous.finalY + 70);
    doc.text(
      "We declare that this invoice shows the actual price of the goods described and that all particulars are true and correct.",
      10,
      doc.autoTable.previous.finalY + 80
    );

    // Save PDF
    doc.save("invoice.pdf");
  };
  return (
    <div className="invoice-form">
      <h1>Invoice Form</h1>

      <form>
        <div className="fullForm">
          <div className="form-one-section">
            <div className="form-one-section-left">
              <div>
                <label className="label-form heading-class">
                  Supplier Name: M/S OM SHREE KARNI MARBLES GRANITES
                </label>
                {/* <input type="text" name="supplierName" value={formData.supplierName} onChange={handleInputChange} /> */}
              </div>
              <div>
                <label className="label-form ">Plot Number:</label>
                <textarea
                  type="text"
                  name="plotNumber"
                  value={formData.plotNumber}
                  onChange={handleInputChange}
                ></textarea>
              </div>
              <div>
                <label className="label-form ">Location:</label>
                <textarea
                  type="text"
                  name="location"
                  value={formData.location}
                  onChange={handleInputChange}
                ></textarea>
              </div>
              <div>
                <label className="label-form ">GSTIN: 36AAHFO0962G1Z9</label>
                {/* <input type="text" name="gstin" value={formData.gstin} onChange={handleInputChange} /> */}
              </div>
            </div>
            <div className="form-one-section-right">
              <div className="div-flex-row">
                <div className="div-flex-row-col-1">
                  <label>Invoice No:</label>
                  <input
                    type="text"
                    name="invoiceNo"
                    value={formData.invoiceNo}
                    onChange={handleInputChange}
                  />
                </div>
                <div className="div-flex-row-col-2">
                  {" "}
                  <label>Invoice Date:</label>
                  <input
                    type="date"
                    name="invoiceDate"
                    value={formData.invoiceDate}
                    onChange={handleInputChange}
                  />
                </div>
              </div>
              <div className="div-flex-row">
                <div className="div-flex-row-col-1">
                  <label>Lorry No / Vehicle No:</label>
                  <input
                    type="text"
                    name="lorryNo"
                    value={formData.lorryNo}
                    onChange={handleInputChange}
                  />
                </div>
                <div className="div-flex-row-col-2">
                  <label>Mode/Terms of Payment:</label>
                  <input
                    type="text"
                    name="paymentTerms"
                    value={formData.paymentTerms}
                    onChange={handleInputChange}
                  />
                </div>
              </div>
              <div className="div-flex-row">
                <div className="div-flex-row-col-1">
                  <label>Supplier's Ref:</label>
                  <input
                    type="text"
                    name="supplierRef"
                    value={formData.supplierRef}
                    onChange={handleInputChange}
                  />
                </div>
                <div className="div-flex-row-col-2">
                  <label>Other Reference(s):</label>
                  <input
                    type="text"
                    name="otherRef"
                    value={formData.otherRef}
                    onChange={handleInputChange}
                  />
                </div>
              </div>
            </div>
          </div>
          <div className="form-two-section flex-osk border-one-solid">
            <div className="form-two-section-left">
              <div>
                <label>Buyer Name:</label>
                <input
                  type="text"
                  name="buyerName"
                  value={formData.buyerName}
                  onChange={handleInputChange}
                />
              </div>
              <div>
                <label>Buyer Address:</label>
                <input
                  type="text"
                  name="buyerAddress"
                  value={formData.buyerAddress}
                  onChange={handleInputChange}
                />
              </div>
            </div>
            <div className="form-two-section-right">
              <div className="div-flex-row">
                <div className="div-flex-row-col-1">
                  <div>
                    <label>Buyer's Order No:</label>
                    <input
                      type="text"
                      name="buyerOrderNo"
                      value={formData.buyerOrderNo}
                      onChange={handleInputChange}
                    />
                  </div>
                </div>
                <div className="div-flex-row-col-2">
                  <div>
                    <label>Buyer's Order Date:</label>
                    <input
                      type="text"
                      name="buyerOrderDate"
                      value={formData.buyerOrderDate}
                      onChange={handleInputChange}
                    />
                  </div>
                </div>
              </div>
              <div className="div-flex-row">
                <div>
                  <label>Terms of Delivery:</label>
                  <input
                    type="text"
                    name="deliveryTerms"
                    value={formData.deliveryTerms}
                    onChange={handleInputChange}
                  />
                </div>
              </div>
            </div>
          </div>
          <div className="form-two-section flex-osk border-one-solid">
          <div>
            <label>Description of Goods:</label>
            <input
              type="text"
              name="description"
              value={formData.description}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>HSN/SAC:</label>
            <input
              type="text"
              name="hsn"
              value={formData.hsn}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>GST Rate:</label>
            <input
              type="text"
              name="gstRate"
              value={formData.gstRate}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Quantity:</label>
            <input
              type="text"
              name="quantity"
              value={formData.quantity}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Rate:</label>
            <input
              type="text"
              name="rate"
              value={formData.rate}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Total Amount:</label>
            <input
              type="text"
              name="totalAmount"
              value={formData.totalAmount}
              onChange={handleInputChange}
            />
          </div>
          </div>
          <div>
            <label>CGST:</label>
            <input
              type="text"
              name="cgst"
              value={formData.cgst}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>SGST:</label>
            <input
              type="text"
              name="sgst"
              value={formData.sgst}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Amount Chargeable:</label>
            <input
              type="text"
              name="amountChargeable"
              value={formData.amountChargeable}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Tax Amount:</label>
            <input
              type="text"
              name="taxAmount"
              value={formData.taxAmount}
              onChange={handleInputChange}
            />
          </div>
          <div>
            <label>Company's PAN:</label>
            <input
              type="text"
              name="companyPan"
              value={formData.companyPan}
              onChange={handleInputChange}
            />
          </div>
          <button type="button" onClick={handleDownload}>
            Submit
          </button>
        </div>
      </form>
    </div>
  );
};

export default InvoiceBill;
